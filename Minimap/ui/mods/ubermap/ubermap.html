<html class="ignoreMouse">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<noloc>
<title>UberMap</title>
</noloc>
<link href="coui://ui/main/shared/css/global.css" rel="stylesheet" type="text/css" />
<link href="coui://ui/main/shared/js/thirdparty/jquery-ui-1.10.3.custom/css/alpha_theme/jquery-ui-1.10.3.custom.css" rel="stylesheet"
	type="text/css" />
<link href="coui://ui/main/shared/js/thirdparty/DataTables-1.9.4/media/css/jquery.dataTables.custom.css" rel="stylesheet" type="text/css" />
<link href="ubermap.css" rel="stylesheet" type="text/css" />

<script src="d3v3.js" type="text/javascript"></script>
<script src="d3.geo.projection.v0.min.js" type="text/javascript"></script>
<script src="d3.geo.polyhedron.v0.min.js" type="text/javascript"></script>

<script src="coui://ui/main/shared/js/common.js" type="text/javascript"></script>

<script src="knockout-deferred-updates.3.3.1.js" type="text/javascript"></script>

<script src="systems.js" type="text/javascript"></script>
<script src="projections.js" type="text/javascript"></script>
<script src="strategic_icons.js"></script>
<script src="selection.js"></script>
<script src="ubermap.js" type="text/javascript"></script>

</head>

<body class="body_panel" data-bind="style: {width: bodyWidth()+'px', height: bodyHeight()+'px'}", style="position: relative">
	
	<div class="minimaps" data-bind="style: {'max-width': minimapAreaWidth()+'px'}">
		<!-- ko foreach: minimaps -->
		<div class="minimap" style="position: relative" data-bind="visible: !dead(), style: {width: width()+'px', height: height()+'px'}">
			<div data-bind="text: name" class="mapname" style="position: absolute; top: 0px; left: 0px"></div>
			<svg class="receiveMouse" data-bind="click: clickMinimap, event: {mousemove: mousemove, mouseleave: mouseleave, contextmenu: moveByMinimap}">
				<defs>
					<path data-bind="id: mappingObject().id+'-sphere', datum: {type: 'Sphere'}, d: path"></path>
					<clipPath data-bind="id: mappingObject().id+'-clip'">
						<use data-bind="svguse: mappingObject().id+'-sphere'"></use>
					</clipPath>
					
					<!-- ko foreach: unitSpecs -->
					<path data-bind="id: $parent.mappingObject().id + $parent.usedSpecsMap[$data] + '_b', d: strategicIconPaths[$data + '_border'] || strategicIconsPaths.fallback_border"></path>
					<path data-bind="id: $parent.mappingObject().id + $parent.usedSpecsMap[$data] + '_f', d: strategicIconPaths[$data + '_fill'] || strategicIconsPaths.fallback_fill"></path>
					<!-- /ko -->
					
				</defs>
				<use class="background" data-bind="svguse: mappingObject().id+'-sphere'"></use>
				<path class="graticule" data-bind="attr: {'clip-path': 'url(#'+mappingObject().id+'-clip)'}, d3b: d3b"></path>
				<!-- ko foreach: layers -->
				<path data-bind="css: layer, d3b: [data, $parent.path()], attr: {'clip-path': 'url(#'+$parent.mappingObject().id+'-clip)'}"></path>
				<!-- /ko -->
				<!-- ko foreach: zSortedUnits -->
					<use data-bind="svguse: $parent.mappingObject().id + $parent.usedSpecsMap[spec()] + '_b', css: borderClass, attr: {transform: transformComputed}"></use>
					<use data-bind="svguse: $parent.mappingObject().id + $parent.usedSpecsMap[spec()] + '_f', attr: {fill: armyColor, transform: transformComputed}"></use>
				<!-- /ko -->
			</svg>
		</div>
		<!-- /ko -->
		
	</div>
	
	<div class="ubermaps">
		<!-- ko foreach: ubermaps -->
		<div style="position: absolute;" data-bind="visible: visible, style: {width: width()+'px', height: height()+'px', top: top()+'px', left: left()+'px'}">
			<svg class="receiveMouse">
				<defs>
					<path data-bind="id: mappingObject().id+'-um-sphere', datum: {type: 'Sphere'}, d: path"></path>
					<clipPath data-bind="id: mappingObject().id+'-um-clip'">
						<use data-bind="svguse: mappingObject().id+'-um-sphere'"></use>
					</clipPath>
					
					<!-- ko foreach: unitSpecs -->
					<path data-bind="id: $parent.mappingObject().id + '-um-' + $parent.usedSpecsMap[$data] + '_b', d: strategicIconPaths[$data + '_border'] || strategicIconsPaths.fallback_border"></path>
					<path data-bind="id: $parent.mappingObject().id + '-um-' + $parent.usedSpecsMap[$data] + '_f', d: strategicIconPaths[$data + '_fill'] || strategicIconsPaths.fallback_fill"></path>
					<!-- /ko -->
					
				</defs>
				<use class="background" data-bind="svguse: mappingObject().id+'-um-sphere'"></use>
				<path class="graticule" data-bind="attr: {'clip-path': 'url(#'+mappingObject().id+'-um-clip)'}, d3b: d3b"></path>
				<!-- ko foreach: layers -->
				<path data-bind="css: layer, d3b: [data, $parent.path()], attr: {'clip-path': 'url(#'+$parent.mappingObject().id+'-um-clip)'}"></path>
				<!-- /ko -->
				<!-- ko foreach: zSortedUnits -->
					<use data-bind="svguse: $parent.mappingObject().id + '-um-' + $parent.usedSpecsMap[spec()] + '_b', css: borderClass, attr: {transform: transformComputed}"></use>
					<use data-bind="svguse: $parent.mappingObject().id + '-um-' + $parent.usedSpecsMap[spec()] + '_f', attr: {fill: armyColor, transform: transformComputed}"></use>
				<!-- /ko -->
			</svg>
		</div>
		<!-- /ko -->
	</div>
</body>
</html>